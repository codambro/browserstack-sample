"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const lodash_1 = require("lodash");
const warning_messages_1 = require("../templates/warning-messages");
// NOTE: We need to continuously poll BrowserStack APIs in Automate sessions to avoid the idle timeout.
// The value can be reduced for unstable network connections if there is a high risk of random request failures.
const DEFAULT_API_POLLING_INTERVAL = 80000;
// NOTE: the max value is capped at the BrowserStack idle timeout.
// https://www.browserstack.com/automate/timeouts
const MAX_API_POLLING_INTERVAL = 90000;
function default_1() {
    const pollingInterval = (0, lodash_1.toInteger)(process.env.TESTCAFE_BROWSERSTACK_API_POLLING_INTERVAL) || DEFAULT_API_POLLING_INTERVAL;
    if (pollingInterval > MAX_API_POLLING_INTERVAL)
        process.emitWarning((0, warning_messages_1.API_POLLING_INTERVAL_IS_TOO_LARGE)({ actual: pollingInterval, expected: MAX_API_POLLING_INTERVAL }));
    return pollingInterval;
}
exports.default = default_1;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2V0LWFwaS1wb2xsaW5nLWludGVydmFsLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL3V0aWxzL2dldC1hcGktcG9sbGluZy1pbnRlcnZhbC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLG1DQUFtQztBQUNuQyxvRUFBa0Y7QUFFbEYsdUdBQXVHO0FBQ3ZHLGdIQUFnSDtBQUNoSCxNQUFNLDRCQUE0QixHQUFHLEtBQUssQ0FBQztBQUUzQyxrRUFBa0U7QUFDbEUsaURBQWlEO0FBQ2pELE1BQU0sd0JBQXdCLEdBQUcsS0FBSyxDQUFDO0FBRXZDO0lBQ0ksTUFBTSxlQUFlLEdBQUcsSUFBQSxrQkFBUyxFQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsMENBQTBDLENBQUMsSUFBSSw0QkFBNEIsQ0FBQztJQUUxSCxJQUFJLGVBQWUsR0FBRyx3QkFBd0I7UUFDMUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxJQUFBLG9EQUFpQyxFQUFDLEVBQUUsTUFBTSxFQUFFLGVBQWUsRUFBRSxRQUFRLEVBQUUsd0JBQXdCLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFFNUgsT0FBTyxlQUFlLENBQUM7QUFDM0IsQ0FBQztBQVBELDRCQU9DIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdG9JbnRlZ2VyIH0gZnJvbSAnbG9kYXNoJztcbmltcG9ydCB7IEFQSV9QT0xMSU5HX0lOVEVSVkFMX0lTX1RPT19MQVJHRSB9IGZyb20gJy4uL3RlbXBsYXRlcy93YXJuaW5nLW1lc3NhZ2VzJztcblxuLy8gTk9URTogV2UgbmVlZCB0byBjb250aW51b3VzbHkgcG9sbCBCcm93c2VyU3RhY2sgQVBJcyBpbiBBdXRvbWF0ZSBzZXNzaW9ucyB0byBhdm9pZCB0aGUgaWRsZSB0aW1lb3V0LlxuLy8gVGhlIHZhbHVlIGNhbiBiZSByZWR1Y2VkIGZvciB1bnN0YWJsZSBuZXR3b3JrIGNvbm5lY3Rpb25zIGlmIHRoZXJlIGlzIGEgaGlnaCByaXNrIG9mIHJhbmRvbSByZXF1ZXN0IGZhaWx1cmVzLlxuY29uc3QgREVGQVVMVF9BUElfUE9MTElOR19JTlRFUlZBTCA9IDgwMDAwO1xuXG4vLyBOT1RFOiB0aGUgbWF4IHZhbHVlIGlzIGNhcHBlZCBhdCB0aGUgQnJvd3NlclN0YWNrIGlkbGUgdGltZW91dC5cbi8vIGh0dHBzOi8vd3d3LmJyb3dzZXJzdGFjay5jb20vYXV0b21hdGUvdGltZW91dHNcbmNvbnN0IE1BWF9BUElfUE9MTElOR19JTlRFUlZBTCA9IDkwMDAwO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgcG9sbGluZ0ludGVydmFsID0gdG9JbnRlZ2VyKHByb2Nlc3MuZW52LlRFU1RDQUZFX0JST1dTRVJTVEFDS19BUElfUE9MTElOR19JTlRFUlZBTCkgfHwgREVGQVVMVF9BUElfUE9MTElOR19JTlRFUlZBTDtcblxuICAgIGlmIChwb2xsaW5nSW50ZXJ2YWwgPiBNQVhfQVBJX1BPTExJTkdfSU5URVJWQUwpXG4gICAgICAgIHByb2Nlc3MuZW1pdFdhcm5pbmcoQVBJX1BPTExJTkdfSU5URVJWQUxfSVNfVE9PX0xBUkdFKHsgYWN0dWFsOiBwb2xsaW5nSW50ZXJ2YWwsIGV4cGVjdGVkOiBNQVhfQVBJX1BPTExJTkdfSU5URVJWQUwgfSkpO1xuXG4gICAgcmV0dXJuIHBvbGxpbmdJbnRlcnZhbDtcbn1cbiJdfQ==